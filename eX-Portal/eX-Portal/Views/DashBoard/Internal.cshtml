@model eX_Portal.ViewModel.WeatherViewModel
@using eX_Portal.exLogic
@{
  Layout = null;
  ViewBag.Title = "Internal Dashboard";
}
<link href="~/Content/internal-dashboard.css" rel="stylesheet" />

<div id="chartjs-tooltip">data</div>
<div class="dash-row">

  <div class="dash-column col1">
    <div class="dash-content">
      <h3>Recent Flight Time</h3>
        <div id="RecentFlight" style="width: 480px; height: 250px"></div>
     
    </div>
  </div>

  <div class="dash-column col2">
    <div class="dash-content">
      <h3>Total Flight Time</h3>
     
       <div id="TotalFlight" style="width: 480px; height: 250px;"></div>       
    </div>
  </div>

  <div class="dash-column col1">
      <div class="dash-content weather">
        <h3>Weather in @Html.DisplayFor(Model => Model.City)</h3>
        <div>
          <table cellpadding="0" cellspacing="0">
            <tr>
              <td rowspan="2" class="condition">
                  @if (Model.ConditionCode != null) {

                  <img style="width:80px; height:80px;" src="~/images/weather/@(Model.ConditionCode).png" />
                <!--<span class="icon big">@Html.Raw(Weather.WeatherIcons[int.Parse(Model.ConditionCode)])</span>--><br />
                  }
                @Model.ConditionText
              </td>
              <td class="spacer"></td>
              <td>
                <span class="icon">&#xf055;</span>
              </td>
              <td>
                <span class="text">
                  @Html.DisplayFor(Model => Model.ConditionTemperature)
                  @Html.DisplayFor(Model => Model.TemperatureUnit)
                </span>
              </td>
              <td class="spacer"></td>
              <td>
                <span style="display:inline-block; transform: rotate(@(Model.Direction)deg);" class="icon">&#xf0b1;</span>
                <label>@Html.DisplayFor(Model => Model.Direction) &deg;</label><br>
                <span>@Html.DisplayFor(Model => Model.Speed) km/h</span><br>
              </td>
              <td class="spacer"></td>
              <td>

                <div>
                  <span class="icon tiny">&#xf07a;</span>
                  <label>Humidity: @Html.DisplayFor(Model => Model.Humidity)%</label>
                </div>
                <div>
                  <span class="icon tiny">&#xf075;</span>
                  <label>Visibility: @Html.DisplayFor(Model => Model.Visibility) KM</label>
                </div>
                <div>
                  <span class="icon tiny">&#xf079;</span>
                  <label>
                    Pressure: @Html.DisplayFor(Model => Model.Pressure) MB
                    (@Model.PressureStatus)
                  </label>
                </div>

              </td>
            </tr>
            <tr>

              <td class="spacer"></td>
              <td colspan="2"><span class="caption">Temperature</span></td>
              <td class="spacer"></td>
              <td><span class="caption">Wind</span></td>
              <td class="spacer"></td>
              <td><span class="caption">Atmosphere</span></td>
            </tr>
          </table>



        </div>
        <div style="margin-top:20px;">
          <ul id="forecast">
            @foreach (var item in Model.Forecast) {
            <li>
              <span class="big">
                <img style="width:50px; height:50px;" src="~/images/weather/@(item.Code).png" />
              <!--@Html.Raw(Weather.WeatherIcons[item.Code])--></span><br />
              <div class="status">@item.status</div>
              <div class="date">@item.Date</div>
              <div class="temp">
                <span class="tiny icon">&#xf058;</span>
                @item.TempLow&deg;
                <span class="tiny icon">&#xf044;</span>
                @item.TempHigh&deg;
              </div>
            </li>
            }
          </ul>
        </div>


      </div>
    </div>

  <div class="dash-column col2">
    <div class="dash-content">
      <h3>Total Pilot Time</h3>
        <div id="Pilotcontainer" style="width: 500px; height: 280px; "></div>  
    
    </div>
  </div>
</div>


<div class="Pichart">
    <div style="float:left" class="ChartDev" >
        <h4>Total Alerts</h4>
        <canvas id="TotalAlerts" ></canvas>
      <div class="AlertSum" id="TotalAlerts_Sum">Loading...</div>
    </div>   

    <div style="float:left" class="ChartDev">
        <h4>This Month</h4>
        <canvas id="ThisMonthAlerts"></canvas>
      <div class="AlertSum" id="ThisMonthAlerts_Sum">Loading...</div>
    </div>

    <div style="float:left" class="ChartDev">
        <h4>Last Flight</h4>
        <canvas id="LastFlightAlerts"></canvas>
      <div class="AlertSum" id="LastFlightAlerts_Sum">Loading...</div>
    </div>

  <div style="float:left" class="ChartDev">
    <h4>Legend</h4>
    <div id="js-legend" class="chart-legend">
      <ul class="pie-legend">
        <li><span style="background-color:rgba(151,187,205,0.5)"></span>Altitude</li>
        <li><span style="background-color:#FF6384"></span>Boundary</li>
        <li><span style="background-color:#FFCE56"></span>Proximity</li>
      </ul>

    </div>
  </div>   

  
  <div style="clear:both"></div>
</div>


<div id="map_canvas" style="margin-top:10px; width: 100%; height: 480px;"></div>
<div style="height:10px;">&nbsp;</div>


<script type="text/javascript">
    var DashBoardAlertChartDataURL = '@Url.Action("getAlertData", "Dashboard")';   
    var PilotDataURL = '@Url.Action("getPilotData", "Dashboard")';
    var FlightDataURL = '@Url.Action("getFlightData", "Dashboard")'; 
    var HomeMapURL = '@Url.Action("GetDrones", "Map")';
</script>



<script type="text/javascript" src="~/Scripts/DashBoardAlertChart.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script type="text/javascript" src="~/Scripts/PilotLogChart.js"></script>
<script type="text/javascript" src="~/Scripts/RecentChart.js"></script>


@{
    Html.AddJavaScript("//maps.google.com/maps/api/js?sensor=false");
    Html.AddJavaScript("/Scripts/infobox.js");
    Html.AddJavaScript("/Scripts/HomeMap.js");
    Html.AddJavaScript("/Scripts/Chart.js");
}
