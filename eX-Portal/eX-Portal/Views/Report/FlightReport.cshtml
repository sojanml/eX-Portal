@model eX_Portal.ViewModel.FlightViewModel
@using eX_Portal.exLogic;
@{  
  Layout = null;
}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <title>Untitled 1</title>
  <style type="text/css">
    @@font-face {
      font-family: 'GeneralText';
      src: url('../fonts/DINNextLTPro-Light.eot');
      src: local('â˜º'), url('/fonts/DINNextLTPro-Light.woff') format('woff'), url('/fonts/DINNextLTPro-Light.ttf') format('truetype'), url('/fonts/DINNextLTPro-Light.svg') format('svg');
      font-weight: normal;
      font-style: normal;
    }

    @@font-face {
      font-family: 'FontAwesome';
      src: url('/fonts/fontawesome-webfont.eot?v=4.5.0');
      src: url('/fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('/fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('/fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('/fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('/fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');
      font-weight: normal;
      font-style: normal;
    }

    body {
      font-family: GeneralText;
    }

    span.refresh,
    span.icon,
    span.green_icon {
      font-family: FontAwesome;
      cursor: pointer;
      color: gray;
    }

    div.warning {
      border-bottom: 2px #fe9400 solid;
      border-top: 2px #fe9400 solid;
      margin-bottom: 10px;
      line-height: 30px;
      padding: 5px 0px 5px 10px;
      background-color: rgba(254,148,0,0.2);
    }

      div.warning > span.icon {
        color: #fe9400;
        font-size: 30px;
        float: left;
        margin-right: 10px;
      }

    div.invalid {
      border-bottom: 2px red solid;
      border-top: 2px red solid;
      padding: 5px;
      margin-bottom: 10px;
      line-height: 30px;
      background-color: rgba(255,0,0,0.2);
    }

      div.invalid > span.icon {
        color: red;
        font-size: 30px;
        float: left;
        margin-right: 10px;
      }

    div.authorise {
      border-bottom: 2px green solid;
      border-top: 2px green solid;
      padding: 5px;
      margin-bottom: 10px;
      line-height: 30px;
      background-color: rgba(0,255,0,0.2);
    }

      div.authorise > span.icon {
        color: green;
        font-size: 30px;
        float: left;
        margin-right: 10px;
      }

   

    th {
      background-color: #ea050e;
      color: white;
      text-align: left;
    }
  </style>
</head>
<body>
  <table style="width: 100%">
    <tr>
      <td valign="top"><img alt="" height="62" src="../../images/logo.png" width="300" /></td>
      <td valign="top" align="right" color="#ea050e"><font size="12"><strong>Post Flight Report</strong></font></td>
    </tr>
  </table>
  <p style="text-align:center">
    <font color="#ea050e" size="6">@Html.DisplayFor(Model => Model.DroneName)</font><br />
    <span>Flight ID: @ViewBag.FlightID</span>
  </p>

  <table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
    <tr>
      <th>Basic Flight Information</th>
    </tr>
    <tr>
      <td>
        <table style="width: 100%">
          <tr>
            <td>ID: <b>@Html.DisplayFor(Model => Model.ID)</b></td>
            <td>Pilot: <b>@Html.DisplayFor(Model => Model.PilotName)</b></td>
            <td>Ground Staff: <b>@Html.DisplayFor(Model => Model.GSCName)</b></td>
          </tr>
          <tr>
            <td>UAS ID: <b>@Html.DisplayFor(Model => Model.DroneName)</b></td>
            <td>Created On (UTC): <b>@Model.getCreatedOn()</b> </td>
            <td>Flight Date (UTC): <b>@Model.getFlightDate()</b> </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
  <p>&nbsp;</p>
  @if(Model.Info != null) { 
  <table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
    <tr>
      <th>Flight Summary</th>
    </tr>
    <tr>
      <td>
        <table width="100%">
          <tr>
            <td valign="top">
              <b>General</b><br />
              &nbsp;<br />
            Flight Time: <b>@Util.toFix((Double)Model.FlightHours) Minutes <br /></b>
            Distance: <b>@Util.toFix(Model.FlightDistance) Meters</b><br />
            </td>

            <td valign="top">
              <b>Speed</b> (Meter per Hour)<br />
              &nbsp;<br />
              Average: <b>@Util.toFix(Model.Info.AvgSpeed)</b> <br />
              Minimum: <b>@Util.toFix(Model.Info.MinSpeed)</b> <br />
              Maximum: <b>@Util.toFix(Model.Info.MaxSpeed)</b>
            </td>

            <td valign="top">
              <b>Altitude</b> (Meters)<br />
              &nbsp;<br />
              Average: <b>@Util.toFix(Model.Info.AvgAltitude)</b> <br />
              Minimum: <b>@Util.toFix(Model.Info.MinAltitude)</b> <br />
              Maximum: <b>@Util.toFix(Model.Info.MaxAltiude) </b>
            </td>

            <td valign="top">
              <b>Satellites</b><br />
              &nbsp;<br />
              Average: <b>@Util.toFix(Model.Info.AvgSatellites)</b> <br />
              Minimum: <b>@Util.toFix(Model.Info.MinSatellites)</b> <br />
              Maximum: <b>@Util.toFix(Model.Info.MaxSatellites)</b>
            </td>

          </tr>
        </table>
      </td>
    </tr>
  </table>
  <p>&nbsp;</p>
  }
  <table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
    <tr>
      <th>Flight Track</th>
    </tr>
    <tr>
      <td>
        <table cellpadding="0" cellspacing="0">
          <tr>
            <td valign="top"><img src="@Html.Action("GoogleMap","Report", new { ID = ViewBag.FlightID })" /></td>
            <td valign="top">&nbsp;&nbsp;</td>
            <td valign="top">
              <p><b>Weahter</b></p>
              <p>
                Condition: <b>@Model.Info.Condition</b><br />
                Wind: <b>@Util.toFix(1.60934 * Util.toDouble(Model.Info.WindSpeed))</b> kph<br />
                Humidity: <b>@Model.Info.Humidity</b> %<br />
                Visibility: <b>@Util.toFix((Double)Model.Info.Visibility/100)</b> kilometers<br />
                Pressure: <b>@((int)Model.Info.Pressure)</b> millibars<br />
                Temperature: <b>@Model.Info.Temperature &deg;C</b>                
              </p>

            </td>
          </tr>
        </table>


      </td>
    </tr>
  </table>
  <p>&nbsp;</p>
  <table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
    <tr>
      <th>Chart &amp; Flight Parameters</th>
    </tr>
    <tr>
      <td><img src="/Report/GetChart/@ViewBag.FlightID" /></td>
    </tr>
  </table>

  <div style="page-break-before: always;"></div>

  @Html.Action("DroneCheckWarning", "Report", new { ID = ViewBag.FlightID })
  
  <p>&nbsp;</p>

  @if(Model.PortalAlerts.Count > 0 ) { 
  <table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
    <tr>
      <th>Warning/Alerts</th>
    </tr>
    <tr>
      <td>
        <ul>
          @foreach (var element in Model.PortalAlerts) {
            <li style="padding:10px 0px 10px 0px; ">
              <font>
                <b>@Html.DisplayFor(m => element.AlertType)</b> -
                @Html.DisplayFor(m => element.AlertMessage)
              </font>
            </li>
          }
        </ul>
      </td>
    </tr>
  </table>
  <p>&nbsp;</p>
  }@*if (Model.PortalAlerts.Count > 0)*@

@if (Model.Videos.Count > 0) {
  <table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
    <tr>
      <th>Recorded Videos</th>
    </tr>
    <tr>
      <td>
        <ul>
          @foreach (var element in Model.Videos) {
          <li style="padding:10px 0px 10px 0px; ">@element.VideoURL</li>
          }
        </ul>
      </td>
    </tr>
  </table>
  <p>&nbsp;</p>
}@*if (Model.PortalAlerts.Count > 0)*@


@if (Model.Approvals.Count > 0) {
<table cellpadding="4" cellspacing="0" style="width: 100%" border="2" BORDERCOLOR="#ea050e">
  <tr>
    <th>Zone Approvals</th>
  </tr>
  <tr>
    <td>
      <table width="100%" border="1" cellspacing="0" cellpadding="5">
        <thead>
          <tr>
            <th>Approval Name</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Start Time</th>
            <th>End Name</th>
          </tr>
        </thead>
        <tbody>
          @foreach (var item in Model.Approvals) {
          <tr>
            <td>@item.ApprovalName</td>
            <td>@Util.fmtDt(item.StartDate) UTC</td>
            <td>@Util.fmtDt(item.EndDate) UTC</td>
            <td>@item.StartTime</td>
            <td>@item.EndTime</td>
          </tr>
          }
        </tbody>
      </table>
    </td>
  </tr>
</table>
  <p>&nbsp;</p>
}@*if (Model.PortalAlerts.Count > 0)*@

</body>

</html>
